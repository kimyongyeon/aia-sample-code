<!-- gemini-test/template.html -->

<div>
  <h1>Hello, name!</h1>
  <p>This is a template loaded dynamically.</p>
  <p>Current date: date</p>

  <button id="next">next</button>
</div>

<script>
  (function () {
    console.log(window.responseData);

    const name = window.responseData.name;
    const date = window.responseData.date;

    document.querySelector("h1").textContent = `Hello, ${name}!`;
    document.querySelector("p").textContent = `Current date: ${date}`;

    document.querySelector("#next").addEventListener("click", () => {
      loadComponent("root", "child.html", {
        name: "Child",
        date: new Date().toLocaleDateString(),
      });
    });

    // api.getUser 함수 호출 예제
    if (window.api) {
      window.api
        .getUser()
        .then((userData) => {
          console.log("Template에서 API 호출 결과:", userData);
          // 필요시 UI 업데이트
          // document.querySelector("h1").textContent = `Hello, ${userData.name}!`;
        })
        .catch((error) => {
          console.error("API 호출 실패:", error);
        });
    } else {
      console.warn("API가 아직 로드되지 않았습니다.");
    }
  })();
</script>
